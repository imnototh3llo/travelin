import { Markup } from "telegraf";
import type { Context } from "../types/bot.js";

export const startCommand = async (ctx: Context): Promise<void> => {
	try {
		console.log("Executing startCommand...");
		const welcomeMessage = `–ü—Ä–∏–≤–µ—Ç, –º–µ–Ω—è –∑–æ–≤—É—Ç <b>–¢—Ä–µ–≤–µ–ª–∏–Ω</b>! üëã –Ø –ø–æ–º–æ–≥—É –≤–∞–º –Ω–∞—Ö–æ–¥–∏—Ç—å —Å–∞–º—ã–µ –¥–µ—à–µ–≤—ã–µ –∞–≤–∏–∞–±–∏–ª–µ—Ç—ã –æ—á–µ–Ω—å –ª–µ–≥–∫–æ. 
–ü—Ä–æ—Å—Ç–æ –≤–≤–µ–¥–∏—Ç–µ —Å–ª–µ–¥—É—é—â—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é:
‚Äî <b>–û—Ç–∫—É–¥–∞.</b> ‚úàÔ∏è
‚Äî <b>–ö—É–¥–∞.</b> üåç
‚Äî <b>–í –∫–∞–∫–∏–µ –¥–∞—Ç—ã –≤—ã —Ö–æ—Ç–∏—Ç–µ –≤—ã–ª–µ—Ç–µ—Ç—å.</b> üìÖ
‚Äî <b>–ò —è –Ω–∞–π–¥—É —Å–∞–º—ã–µ –¥–µ—à–µ–≤—ã–µ –±–∏–ª–µ—Ç—ã –Ω–∞ —ç—Ç–∏ –¥–Ω–∏.</b> ‚ù§Ô∏è

–ò–ª–∏ –∂–µ, –µ—Å–ª–∏ –≤—ã —Ö–æ—Ç–∏—Ç–µ –ø–æ—Å—Ç–æ—è–Ω–Ω–æ –º–æ–Ω–∏—Ç–æ—Ä–∏—Ç—å —Ü–µ–Ω—ã –Ω–∞ –±–∏–ª–µ—Ç—ã, —Ç–æ –ø—Ä–æ—Å—Ç–æ:
‚Ä¢ ‚è∞ <i>–£–∫–∞–∂–∏—Ç–µ –ª—é–±–æ–π –º–µ—Å—è—Ü –≤–º–µ—Å—Ç–æ —Ç–æ—á–Ω–æ–π –¥–∞—Ç—ã ‚Äî —è –ø—Ä–∏—à–ª—é —Å–∞–º—ã–µ –≤—ã–≥–æ–¥–Ω—ã–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã –≤ —ç—Ç–æ—Ç –ø–µ—Ä–∏–æ–¥.</i>
‚Ä¢ ‚ûï <i>–í—ã–±–µ—Ä–∏—Ç–µ +/‚àí 1, 2 –∏–ª–∏ 3 –¥–Ω—è –∫ –Ω—É–∂–Ω—ã–º –¥–∞—Ç–∞–º ‚Äî –∏ —è –ø–æ—Å–º–æ—Ç—Ä—é –≤–∞—Ä–∏–∞–Ω—Ç—ã —Å –∑–∞—Ö–≤–∞—Ç–æ–º —ç—Ç–∏—Ö –¥–Ω–µ–π.</i>
‚Ä¢ ‚öôÔ∏è <i>–î–æ–±–∞–≤—å—Ç–µ –≤ –ø–æ–¥–ø–∏—Å–∫—É –±–∞–≥–∞–∂, –ø–µ—Ä–µ—Å–∞–¥–∫–∏ –∏ –∏—Ö –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å ‚Äî –±—É–¥—É –∏—Å–∫–∞—Ç—å –±–∏–ª–µ—Ç—ã —Å —Ç–∞–∫–∏–º–∏ —É—Å–ª–æ–≤–∏—è–º–∏.</i>
‚Ä¢ üî• <i>–ò—â—É –ø–æ —Ä–∞–∑–º–µ—Ä—É —Å–∫–∏–¥–∫–∏ ‚Äî –±—ã—Å—Ç—Ä–æ –ø—Ä–∏—à–ª—é –±–∏–ª–µ—Ç—ã, –µ—Å–ª–∏ –Ω–∞—á–∞–ª—Å—è —Å–µ–∑–æ–Ω —Ä–∞—Å–ø—Ä–æ–¥–∞–∂.</i>

<b>–î–æ—Å—Ç—É–ø–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã:</b>

/search ‚Äî –ù–∞—á–∞—Ç—å –ø–æ–∏—Å–∫. üîç –≠—Ç–∞ –∫–æ–º–∞–Ω–¥–∞ –ø–æ–∑–≤–æ–ª—è–µ—Ç –Ω–∞–π—Ç–∏ —Å–∞–º—ã–π –¥–µ—à–µ–≤—ã–π –±–∏–ª–µ—Ç –Ω–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É—é –¥–∞—Ç—É, —Å—Ä–∞–≤–Ω–∏–≤ –≤—Å–µ –¥–æ—Å—Ç—É–ø–Ω—ã–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è. –ü—Ä–æ—Å—Ç–æ —É–∫–∞–∂–∏—Ç–µ –º–∞—Ä—à—Ä—É—Ç –∏ –¥–∞—Ç—É, –∏ —è –ø–æ–¥–±–µ—Ä—É –ª—É—á—à–∏–π –≤–∞—Ä–∏–∞–Ω—Ç –¥–ª—è –≤–∞—à–µ–≥–æ –ø—É—Ç–µ—à–µ—Å—Ç–≤–∏—è.
/monitoring ‚Äî –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Ü–µ–Ω –Ω–∞ –±–∏–ª–µ—Ç—ã. üìä –£–∫–∞–∂–∏—Ç–µ –¥–∞—Ç—É, –≥–æ—Ä–æ–¥ –∏ —Å—É–º–º—É, –∏ —è –∫—Ä—É–≥–ª–æ—Å—É—Ç–æ—á–Ω–æ –±—É–¥—É —Å–ª–µ–¥–∏—Ç—å –∑–∞ –±–∏–ª–µ—Ç–∞–º–∏ –≤–º–µ—Å—Ç–æ –≤–∞—Å. –ö–æ–≥–¥–∞ —Ü–µ–Ω–∞ —É–ø–∞–¥–µ—Ç, —è —Å—Ä–∞–∑—É —Å–æ–æ–±—â—É, —á—Ç–æ–±—ã –≤—ã —É—Å–ø–µ–ª–∏ –≤—ã–≥–æ–¥–Ω–æ –∫—É–ø–∏—Ç—å –±–∏–ª–µ—Ç. –í—ã –º–æ–∂–µ—Ç–µ —Å–æ–∑–¥–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø–æ–¥–ø–∏—Å–æ–∫ –Ω–∞ —Ä–∞–∑–Ω—ã–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∏ –¥–∞—Ç—ã ‚Äî —è –ø—Ä–æ–≤–µ—Ä—é –≤—Å–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã! üëå
/checkin ‚Äî –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –Ω–∞ —Ä–µ–π—Å —Å –≤—ã–±–æ—Ä–æ–º –ø—Ä–µ–¥–ø–æ—á—Ç–∏—Ç–µ–ª—å–Ω–æ–≥–æ –º–µ—Å—Ç–∞. üõ´ –≠—Ç–∞ –∫–æ–º–∞–Ω–¥–∞ –ø–æ–∑–≤–æ–ª—è–µ—Ç –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è –Ω–∞ —Ä–µ–π—Å –∑–∞—Ä–∞–Ω–µ–µ, –≤—ã–±—Ä–∞–≤ –ø—Ä–µ–¥–ø–æ—á–∏—Ç–∞–µ–º–æ–µ –º–µ—Å—Ç–æ. –ü—Ä–æ—Å—Ç–æ —É–∫–∞–∂–∏—Ç–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Ä–µ–π—Å–µ, –∏ —è –≤—ã–ø–æ–ª–Ω—é —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é –∑–∞ –≤–∞—Å.

üëá <b>–ò–ª–∏ –≤—ã –º–æ–∂–µ—Ç–µ –ø—Ä–æ—Å—Ç–æ –≤–æ—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–º–∏ –∫–Ω–æ–ø–∫–∞–º–∏ –Ω–∏–∂–µ!</b>
‚ù§Ô∏è <b>–ü–æ–ª—å–∑—É–π—Ç–µ—Å—å –º–Ω–æ–π, —è –ª—é–±–ª—é –ø–æ–º–æ–≥–∞—Ç—å!</b>`;

		const inlineKeyboard = Markup.inlineKeyboard([
			[Markup.button.callback("üîç –ù–∞–π—Ç–∏ –¥–µ—à—ë–≤—ã–µ –±–∏–ª–µ—Ç—ã", "FIND_TICKETS")],
			[Markup.button.callback("üëÄ –°–ª–µ–¥–∏—Ç—å –∑–∞ —Ü–µ–Ω–∞–º–∏", "MONITOR_PRICES")],
			[Markup.button.callback("üõ´ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è –Ω–∞ —Ä–µ–π—Å", "AUTO_CHECKIN")],
		]);

		await ctx.reply(welcomeMessage, {
			parse_mode: "HTML",
			...inlineKeyboard,
		});
		console.log("startCommand executed successfully.");
	} catch (error) {
		console.error("Error in startCommand:", error);
		await ctx.reply("–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞ –ø—Ä–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏ –∫–æ–º–∞–Ω–¥—ã /start.");
	}
};
